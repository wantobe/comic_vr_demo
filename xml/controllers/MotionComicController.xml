<krpano>
	
<!--
	描述：初始化场景
-->
	<action name="initScene" type="Javascript" devices="html5"><![CDATA[
		require(["json!"+krpano.get('content_data')+"?callbak=define"],
			function(data){
				window.comic_data = [];
				window.comic_data = data;
				krpano.call("play_scene(get(page))");
				krpano.call("page_handle(calc(page+1), "+data.length+")");
			}
		);
		
	]]></action>
	
	<action name="play_next">
		clearAllTimeOut();
		clear_hotspot_of_canvas();
		jsget(count, "comic_data.length");
		dec(count);
		if(page EQ count,set(page,0),inc(page););
		txtadd(params,"page=",get(page));
		loadpano("%SWFPATH%/xml/scenes/DynamicComicScene.xml",get(params),REMOVESCENES);
	</action>
	<action name="play_last">
		clearAllTimeOut();
		clear_hotspot_of_canvas();
		jsget(count, "comic_data.length");
		dec(count);
		if(page EQ 0,set(page,get(count)),dec(page););
		txtadd(params,"page=",get(page));
		trace(get(params));
		loadpano("%SWFPATH%/xml/scenes/DynamicComicScene.xml",get(params),REMOVESCENES);
	</action>
	
	
</krpano>
